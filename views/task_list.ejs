<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>èª²é¡Œç®¡ç†ãƒœãƒ¼ãƒ‰</title>
    <style>
        body { font-family: "Helvetica Neue", Arial, sans-serif; background: #eef2f5; padding: 20px; color: #333; }
        h1 { text-align: center; color: #2c3e50; margin-bottom: 30px; }
        
        table { width: 100%; border-collapse: separate; border-spacing: 0 10px; }
        th { text-align: left; color: #7f8c8d; padding: 10px 20px; font-weight: normal; }
        td { background: #fff; padding: 20px; border-top: 1px solid #eee; border-bottom: 1px solid #eee; }
        
        tr td:first-child { border-top-left-radius: 8px; border-bottom-left-radius: 8px; border-left: 1px solid #eee; }
        tr td:last-child { border-top-right-radius: 8px; border-bottom-right-radius: 8px; border-right: 1px solid #eee; }

        .status-badge { padding: 5px 10px; border-radius: 15px; font-size: 0.8em; font-weight: bold; color: white; }
        .status-yet { background: #e74c3c; } 
        .status-doing { background: #f39c12; } 
        .status-done { background: #2ecc71; } 

        .row-done td { background: #f0f0f0; color: #aaa; }
        .row-done .status-badge { background: #95a5a6; }

        .btn { padding: 8px 15px; text-decoration: none; border-radius: 4px; font-size: 14px; margin-right: 5px; color: white; display: inline-block; }
        .btn-detail { background: #3498db; }
        
        .btn-add { 
            background: #3498db; 
            padding: 15px 30px; 
            font-size: 16px; 
            margin-bottom: 20px; 
            box-shadow: 0 4px 6px rgba(52, 152, 219, 0.3); 
        }

        /* â–¼â–¼â–¼ è¿½åŠ ï¼šãƒ›ãƒ¼ãƒ ãƒœã‚¿ãƒ³ã®ãƒ‡ã‚¶ã‚¤ãƒ³ â–¼â–¼â–¼ */
        .btn-home {
            background: #7f8c8d; /* ã‚·ãƒƒã‚¯ãªã‚°ãƒ¬ãƒ¼ */
            padding: 10px 20px;
            font-weight: bold;
            border-radius: 5px; /* å°‘ã—è§’ã‚’ä¸¸ã */
            color: white;
            text-decoration: none;
            display: inline-block;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .btn-home:hover {
            background: #616d6e;
            transform: translateY(-1px);
        }

        .btn-container { text-align: center; }
    </style>
</head>
<body>
    <div style="margin-bottom: 20px;">
        <a href="/" class="btn-home">ğŸ  ãƒ›ãƒ¼ãƒ ç”»é¢ã«æˆ»ã‚‹</a>
    </div>

    <h1>CIT Tasks</h1>

    <div class="btn-container">
        <a href="/public/task_add.html" class="btn btn-add">ï¼‹ æ–°ã—ã„èª²é¡Œã‚’ç™»éŒ²</a>
    </div>

    <table>
        <tr>
            <th>ç§‘ç›®</th>
            <th>èª²é¡Œå</th>
            <th>æœŸé™</th>
            <th>é‡è¦åº¦</th>
            <th>çŠ¶æ…‹</th>
            <th>æ“ä½œ</th>
        </tr>

        <% let i = 0 %>
        <% for (let task of data) { %>
            <tr class="<%= task.status == 'å®Œäº†' ? 'row-done' : '' %>">
                <td>
                    <span style="font-weight: bold;"><%= task.subject %></span>
                    <% if (locals.newId && task.id == newId) { %> <span style="color:red; font-size:0.8em">New!</span> <% } %>
                </td>
                <td><%= task.title %></td>
                <td><%= task.deadline %></td>
                <td style="color: #f1c40f;"><%= task.priority %></td>
                <td>
                    <span class="status-badge 
                        <%= task.status == 'æœªç€æ‰‹' ? 'status-yet' : '' %>
                        <%= task.status == 'é€²è¡Œä¸­' ? 'status-doing' : '' %>
                        <%= task.status == 'å®Œäº†' ? 'status-done' : '' %>
                    ">
                        <%= task.status %>
                    </span>
                </td>
                <td>
                    <a href="/task_detail?id=<%= i %>" class="btn btn-detail">è©³ç´°ãƒ»ç·¨é›†</a>
                </td>
            </tr>
        <% i = i + 1 %>
        <% } %>
    </table>
</body>
</html>